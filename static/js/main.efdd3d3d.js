!function(e){function t(t){for(var a,o,i=t[0],l=t[1],s=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);d.length;)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var i=this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;c.push([282,1]),n()}({166:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFmUlEQVR4Xu1ab4hUVRT/nXvfrGZQkkb1RQqyNCsShVpR2/dmV9ushFLJaA0S0g8ZhUbZl+xLRilF2wc3MshEQy1SM3Pd+ZPKKvRHsUzLoPBLRRoGtenOvffEyM46Mzuzc9+bv7Bvvs275/x+5/7uOec+7n2EEf6jET5/hAKEGTDCFQhLYIQnQNgEfZeAjMmFBJ7CRD8JqU+m7sXRemZR5EtMNVpOJuZbGHRCR/V2P/H4EsCJi1MAbs0i6IM281Qbkn5IK2Xr7EcLpNgDYEwW5o/KM5NsOawFcOKUAKilELBwzJT+2fjBlrQSdk0HcJtR4kRhLE4qj10bHisBZI98lARvLQbIhHe0a1bYEFbKRiZEJzGeLhqTocW6VX9Uis9KACcmXgRhbVEw4i+Uy+2lyCo57iRoL5juK4rJWK2i5rVSnFYCyKTsIMObyiUrFYyf8VKLwoKW6Bb9YSlMKwHSnZa1OJTXbAaxFZkb4OL3UmSD4/tx9ejRGKf7MT79TDbh7IULOIc2/G2NkcD1Dovfitj3kTQzbXYoKwHSJAMdN1GIkIH3tWeWFgveiTlzIMxUgO8BX2qkY4vYngdxEqAjMOKoiqruYpgyLjYS8GTBcW1c253JWoA0Ubrz6pRYQcSTQPQ1GKsyARDhuZRr3sr8v5Q1RjwCxnwAt1uvbK7h9yDsJGE+zl7NSEI8y4w3B00J68A8nZlOyYjp9LMj+RIgfxJOQqwEY13mebrupNDfmJR4DISVAEYHnHi+2wUw1ouI2aKNnJbTjwirlGvWB+UpS4BL9RsXGwhYNhgA4yQIk4MGNKxfHjYDXdozy8vhKlsAHMC1jqJtxV6SyglueF9OKocXYTb+LIejbAFGdWOidsQ2AHeVE0gA32NSmUUX5+B0AN+s9lGOdw+uc6TcAeaZ5cAE9iU6pLRegFb8ERQjeAbsxhjnSvoEoLlBySvjx/vUv/wwHkRfELzAAjgJ2g6mBUFIK+5DvEO5vDAIbiABIgmxjBkbghBWy4cIy1Ou6fKL71+Ag5gQ6RcHmTDBL1k17YlxJtVkZmEWzvjh8S3AkH3fD1uVbYO8F/gSQMZkOxF/XuV5lAXPTPfrqN5rC+JPgLh4m4CaHnzYTiRjx0Cn9swztn5+BThNwM224PWwY+Bn7ZmJttzWAjhJNMOIXlvgutoJM0O14LBNDPYCxMWrAFbbgDaAzVrlmZds4rAXICZ7QdxsA1p3G6bDKqpn2MRhLYCMi18IuDEflBhbDdM2LXUSLs7bkJZtk8BYqWWLIF7EhMX5eAz8qj1zkw2PtQBOTFwEoSkHlPG8iprBA5H0WCSOu5lFO2C6lcBxuPjHJpCiNkdwldPnNINNMwnzacrFsWxbJyZWgfBGXlz9KmpG2fDaCdCDcY4QZ7MBmahDu3pz9rNIAtOZxVdZz15QnnndJpBiNpEeuZQFv5cZJzbTUlF8m20vE/JxYs45AVbGjEcrzpXithKgaT/uMFIcvwzGMeVxaz54JCa25KYk71Iep88EA//yMYmxORU1HfmATpx6AIpmngtt7uxvw3eliK0EyD8RJmBTyjNPFAgi7/rM/oqqWKBDr+QKY0bi4gMGlgziWJ4MBxIAjFdU1KxpJAGcmFgDwss1EYCBd7VnLh+EDrDarlaptMxpckMuZQtngIyLLgKeqokAAO9RHj/QYD3gM4Dm1UgAoFAZ1GsXGJL+aRWq2gMGZGbQfO3pXTlbYY3fA2RcPkTgnUPKqhYCpEkZ2AimmL5C78MM/OWnvgPb9uIa+Z+cC+IoAYXvJGslQOBJVNsxFMDuhjjYe0C1V68S+GEGhBlg9ZFEWAI25Tbc5zE2/nWxCXtA2APCHmDzpZhVE6xLDdeINBSgRkI3LE2YAQ27NDUKLMyAGgndsDRhBjTs0tQosBGfAf8DGD12XxApmhcAAAAASUVORK5CYII="},172:function(e,t,n){e.exports={container:"container--3ORSQ",menu:"menu--2wPFA",content:"content--3HRWU",collapsed:"collapsed--2jsiy",mainContent:"mainContent--1RtB_"}},202:function(e,t,n){e.exports={noselect:"noselect--D2DML"}},270:function(e,t,n){e.exports={tabs:"tabs--3Ptv7"}},282:function(e,t,n){e.exports=n(545)},499:function(e,t,n){},543:function(e,t,n){},544:function(e,t,n){},545:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setStoreData",(function(){return Ge}));n(283);var r=n(10),c=n(0),o=n.n(c),i=n(6),l=n.n(i),s=n(58),u=n(244),m=n(85),d=n(204),p=n(245),f=n.n(p),h=n(246),b=n.n(h),E=n(55),g=n(25),v={userInfo:{userName:"",permission:[],token:""},collapsed:!1,curTab:[],theme:"",reloadPath:"null"},y={SET_USERINFO:{name:"SET_USERINFO",field:"userInfo"},SET_COLLAPSED:{name:"SET_COLLAPSED",field:"collapsed"},SET_CURTAB:{name:"SET_CURTAB",field:"curTab"},SET_THEME:{name:"SET_THEME",field:"theme"},SET_RELOADPATH:{name:"SET_RELOADPATH",field:"reloadPath"}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;if(!y[n])return e;var r=y[n].field;return Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},r,a))},j=Object(m.b)({storeData:O}),S={key:"root",storage:b.a},k=Object(d.a)(S,j),A=Object(m.c)(k,Object(m.a)(f.a)),w=Object(d.b)(A),I=n(277),C=n(198),x=n.n(C),T=(n(297),n(44)),R=n(27),F=(n(298),n(281)),P=(n(175),n(88)),N=n(13),D=n(48),K=(n(126),n(31)),M=n(547),U=Object(M.a)({scriptUrl:"//at.alicdn.com/t/font_1830242_6vhnrbj73u5.js"}),L=(n(176),n(93)),z=function(){return o.a.createElement("div",{className:"home",style:{height:"100vh",padding:20}},"hello world")},B=(n(305),n(278)),H=function(){return o.a.createElement(B.a,{style:{height:"100vh"},status:"403",title:"403",subTitle:"抱歉，您无权访问此页面，如有疑问请联系管理员！"})},J=(n(64),n(21)),V=(n(325),n(280)),Y=(n(127),n(42)),G=(n(128),n(43)),Q=(n(117),n(22)),Z=(n(243),n(167)),_=function(e,t){var n=function(e){var t=Object(c.useState)(!1),n=Object(N.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),i=Object(N.a)(o,2),l=i[0],s=i[1],u=Object(c.useState)(null),m=Object(N.a)(u,2),d=m[0],p=m[1];return[Object(c.useCallback)((function(t){r(!0),s(null),e(t).then((function(e){r(!1),p(e)})).catch((function(){r(!1)}))}),[e]),{loading:a,error:l,response:d}]}(e),a=Object(N.a)(n,2),r=a[0],o=a[1],i=o.loading,l=o.error,s=o.response;return Object(c.useEffect)((function(){return r(t),function(){}}),[r,t]),{loading:i,error:l,response:s}},W=Object(c.forwardRef)((function(e,t){var n=e.config,a=e.handleSearch,r=e.beforeSearch,i=e.onFieldsChange,l=Q.a.useForm(),s=Object(N.a)(l,1)[0],u=n.reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},t.key,t.initialValue))}),{});return Object(c.useImperativeHandle)(t,(function(){return{resetFields:function(e){return e?s.resetFields(Object(D.a)(e)):s.resetFields()}}})),o.a.createElement(Q.a,{form:s,initialValues:u,onFieldsChange:i,layout:"inline",onFinish:function(e){r(e),a(e)},style:{marginBottom:10}},n.map((function(e){return o.a.createElement(Q.a.Item,{key:e.key,name:e.key,rules:e.rules,style:{marginBottom:"6px"}},e.slot)})),o.a.createElement(Q.a.Item,null,o.a.createElement(J.a,{htmlType:"submit",type:"primary"},"搜索")))}));W.defaultProps={beforeSearch:function(){},onFieldsChange:function(){}};var q=W,X=Object(c.forwardRef)((function(e,t){var n=Object(c.useRef)(null),a=e.columns,r=e.apiFun,i=e.searchConfigList,l=e.extraProps,s=e.rowKey,u=e.rowClassName,m=e.small,d=e.showHeader,p=e.extraPagation,f=e.beforeSearch,h=e.onSelectRow,b=e.onFieldsChange,v=e.sortConfig,y=e.expandedRowRender,O=e.onExpand,j=i.reduce((function(e,t){return Object.assign(e,Object(E.a)({},t.key,t.fn?t.fn(t.initialValue):t.initialValue))}),{}),S=Object(g.a)(Object(g.a)(Object(g.a)({},j),l),{},{page:1,pageSize:20}),k=Object(c.useState)([]),A=Object(N.a)(k,2),w=A[0],I=A[1],C=Object(c.useState)(S),x=Object(N.a)(C,2),T=x[0],R=x[1],F=Object(c.useState)(j),P=Object(N.a)(F,2),K=P[0],M=P[1],U=Object(c.useState)({}),L=Object(N.a)(U,2),z=L[0],B=L[1],H=Object(c.useState)(S.page),J=Object(N.a)(H,2),V=J[0],Y=J[1],G=Object(c.useState)(S.pageSize),Q=Object(N.a)(G,2),W=Q[0],X=Q[1],$=_(r,T),ee=$.loading,te=void 0!==ee&&ee,ne=$.response,ae=void 0===ne?{}:ne,re=(null==ae?void 0:ae.data)?ae.data:{},ce=re.rows,oe=void 0===ce?[]:ce,ie=re.total,le=function(e){I([]);var t=e||V,n=1===e?{}:Object(g.a)(Object(g.a)({},K),z);Y(t),R(Object(g.a)(Object(g.a)(Object(g.a)({},S),n),{},{page:t,pageSize:W}))},se={selectedRowKeys:w,onChange:function(e,t){I(e),h(e,t)}},ue=h?{rowSelection:se}:{},me=y?{expandedRowRender:y,onExpand:O,rowClassName:u}:{},de=m?"small":"middle",pe=m?"small":"default";return Object(c.useImperativeHandle)(t,(function(){return{update:function(e){le(e)},resetForm:function(e){n.current&&n.current.resetFields(),M({}),le(e)},resetField:function(e){return e?n.current.resetFields(Object(D.a)(e)):n.current.resetFields()},getTableData:function(){return oe}}})),o.a.createElement("div",null,i.length>0&&o.a.createElement(q,{ref:n,config:i,beforeSearch:f,handleSearch:function(e){M(e),R(Object(g.a)(Object(g.a)(Object(g.a)({},T),e),{},{page:1}))},onFieldsChange:b}),o.a.createElement(Z.a,Object.assign({},ue,me,{rowKey:s,loading:te,dataSource:oe,columns:a,onChange:function(e,t,n){var a=v?v(n):{};B(a);var r=e.current,c=e.pageSize;Y(r),X(c),R(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)({},S),K),a),{},{page:r,pageSize:c}))},size:de,showHeader:d,pagination:{size:pe,total:ie,pageSize:T.pageSize,current:T.page,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["20","50","100","200"].concat(Object(D.a)(p)),showTotal:function(e){return"共 ".concat(e," 条")}}})))}));X.defaultProps={searchConfigList:[],ref:null,extraProps:{},rowKey:"id",rowClassName:"",small:!1,showHeader:!0,extraPagation:[],beforeSearch:function(){},onSelectRow:function(){},onFieldsChange:function(){},sortConfig:function(){},expandedRowRender:null,onExpand:function(){}};var $=X,ee=(n(180),n(89)),te=ee.a.Option,ne=function(e){var t=e.data,n=e.placeholder,a=void 0===n?"请输入搜索条件":n,r=e.value,c=e.onChange,i=void 0===c?function(){}:c,l=e.width,s=void 0===l?"100%":l,u=e.disabled,m=e.onSearch,d=e.defaultValue;return o.a.createElement(ee.a,{allowClear:!0,disabled:u,onChange:function(e){i(e)},optionFilterProp:"children",placeholder:a,showSearch:!0,style:{width:s},value:r?"".concat(r):r,onSearch:m,defaultValue:d},t.map((function(e){return o.a.createElement(te,{key:e.key,title:e.name,value:e.key},e.name)})))},ae=n(257),re=n.n(ae).a.create({baseURL:"/api",timeout:6e5,headers:{"Content-Type":"application/json"}}),ce=new T.a({}),oe=function(){A.dispatch({type:"SET_USERINFO",payload:{}}),ce.history.replace({pathname:"/login"})};re.interceptors.request.use((function(e){var t=(A.getState().storeData.userInfo||{}).token,n=void 0===t?"":t;return e.headers.Authorization=n,e}),(function(e){return Promise.reject(e)})),re.interceptors.response.use((function(e){var t=e.data;return 0!==t.code?(G.a.error(t.message),Promise.reject(t)):Promise.resolve(t)}),(function(e){G.a.destroy();try{if(JSON.stringify(e).includes("401"))return oe(),G.a.error({title:"提示",content:"Unauthorized"}),Promise.reject(e)}catch(e){oe()}return G.a.error("网络异常"),Promise.reject(e)})),re.post=function(e,t){return re({method:"post",url:e,data:t})},re.get=function(e,t){return re({method:"get",url:e,params:t})},re.put=function(e,t){return re({method:"put",url:e,data:t})},re.delete=function(e,t){return re({method:"delete",url:e,data:t})};var ie=re,le={getAdminUserList:function(e){return ie.get("/adminusers",e)},getAdminUser:function(e){return ie.get("/adminusers/".concat(e))},addAdminUser:function(e){return ie.post("/adminusers",e)},updateAdminUser:function(e,t){return ie.put("/adminusers/".concat(e),t)},updateAdminUserPwd:function(e,t){return ie.put("/adminusers/pwd/".concat(e),t)},deleteAdminUser:function(e){return ie.delete("/adminusers",e)}},se={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:17}}},ue={xs:{span:24,offset:0},sm:{span:16,offset:3}},me={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}},de={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:20},sm:{span:20}}},pe=(n(499),["冻结","正常"]),fe=["gold","blue"],he=function(){var e=Object(c.useRef)(),t=Object(R.e)(),n=Q.a.useForm(),a=Object(N.a)(n,1)[0],r=a.getFieldsValue,i=a.resetFields,l=Object(c.useState)(!1),s=Object(N.a)(l,2),u=s[0],m=s[1],d=Object(c.useState)(0),p=Object(N.a)(d,2),f=p[0],h=p[1],b=Object(c.useState)([]),E=Object(N.a)(b,2),v=E[0],y=E[1],O=Object(c.useState)(!0),j=Object(N.a)(O,2),S=j[0],k=j[1],A=[{key:"name",slot:o.a.createElement(Y.a,{placeholder:"用户名",allowClear:!0}),initialValue:""},{key:"status",slot:o.a.createElement(ne,{data:[{name:"正常",key:"1"},{name:"冻结",key:"0"}],placeholder:"状态"})}],w=[{title:"用户名",dataIndex:"name"},{title:"状态",dataIndex:"status",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{color:fe[e]},pe[e]))}},{title:"更新时间",dataIndex:"updateTime"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",dataIndex:"operations",align:"center",render:function(e,n){return o.a.createElement(o.a.Fragment,null,Ne("adminuser:list:edit")&&o.a.createElement("div",null,o.a.createElement(J.a,{className:"btn mr-5",onClick:function(){return function(e){i(),m(!0),h(e.id)}(n)},size:"small",type:"primary",danger:!0},"修改密码"),o.a.createElement(J.a,{className:"btn",onClick:function(){return function(e){t.push("/adminuser/list/edit?id=".concat(e.id))}(n)},size:"small",type:"primary"},"编辑")))}}],I=o.a.createElement(J.a,{className:"fr mr-5",onClick:function(){le.deleteAdminUser(v).then((function(t){G.a.success(t.message),e.current.update()}))},type:"primary",disabled:S,danger:!0},"删除用户"),C=o.a.createElement(J.a,{className:"fr",onClick:function(){t.push("/adminuser/list/add")},type:"primary"},"新增用户");return o.a.createElement(o.a.Fragment,null,u&&o.a.createElement(L.a,{title:"修改密码",visible:u,onCancel:function(){m(!1)},footer:null},o.a.createElement(Q.a,Object.assign({},de,{form:a,onFinish:function(){var e=Object(g.a)({},r());le.updateAdminUserPwd(f,e).then((function(e){G.a.success(e.message)}))}}),o.a.createElement(Q.a.Item,{label:"新密码",name:"password",rules:[{required:!0,message:"请输入新密码"},{min:6,message:"新密码长度最少6个字符"}]},o.a.createElement(Y.a,{placeholder:"请输入新密码"})),o.a.createElement(Q.a.Item,{label:"确认新密码",name:"repassword",rules:[{required:!0,validator:function(e,t){var n=a.getFieldValue("password");return n&&n!==t?Promise.reject(new Error("两次密码输入不一致")):Promise.resolve()}}]},o.a.createElement(Y.a,{placeholder:"请输入确认新密码"})),o.a.createElement(Q.a.Item,{wrapperCol:{xs:{span:20,offset:5},sm:{span:20,offset:5}}},o.a.createElement(J.a,{type:"primary",htmlType:"submit"},"提交")))),Ne("adminuser:list:add")&&C,Ne("adminuser:list:del")&&I,o.a.createElement($,{apiFun:le.getAdminUserList,columns:w,ref:e,onSelectRow:function(e){y(e),e.length>0?k(!1):k(!0)},searchConfigList:A}))},be=(n(179),n(106)),Ee=(n(514),n(276)),ge=n(75),ve=n.n(ge),ye=n(108),Oe=function(e){return ie.get("/adminpermissions",e)},je=function(e){return ie.post("/adminpermissions",e)},Se=function(e,t){return ie.put("/adminpermissions/".concat(e),t)},ke=function(e){return ie.delete("/adminpermissions",e)},Ae=function(){var e=Pe().id,t=[],n=Q.a.useForm(),a=Object(N.a)(n,1)[0],r=a.setFieldsValue,i=a.getFieldsValue,l=a.resetFields,s=Object(c.useState)(!1),u=Object(N.a)(s,2),m=u[0],d=u[1],p=Object(c.useState)([]),f=Object(N.a)(p,2),h=f[0],b=f[1],E=Object(c.useState)([]),v=Object(N.a)(E,2),y=v[0],O=v[1],j=Object(R.e)(),S=function(){var e=Object(ye.a)(ve.a.mark((function e(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe().then((function(e){var n=e.data?e.data:[];t=De(n);var a=Me(t,"id","name");b(a)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){S(),e&&le.getAdminUser(e).then((function(e){var n=e.data?e.data:{},a=n.adminUser?n.adminUser:{},c=(n.permissions?n.permissions:[]).map((function(e){return e.permissionId})),o=[];c.forEach((function(e){var n=Ue(t,e);o=o.concat(n)}));var i=Le(c,o);O(i),a.status=a.status.toString(),l(),r(Object(g.a)({},a))}))}),[e]);return o.a.createElement(be.a,{spinning:m},o.a.createElement(Q.a,Object.assign({},se,{form:a,onFinish:function(){d(!0);var t=Object(g.a)({},i());"string"==typeof t.status&&(t.status=parseInt(t.status,0)),e?le.updateAdminUser(e,t).then((function(e){d(!1),G.a.success(e.message)})).catch((function(){d(!1)})):le.addAdminUser(t).then((function(e){d(!1),G.a.success(e.message);Fe(j,"/adminuser/list")})).catch((function(){d(!1)}))}}),o.a.createElement(Q.a.Item,{label:"用户名",name:"name",rules:[{required:!0,validator:function(e,t){return t.length<4?Promise.reject(new Error("用户名最少4个字符")):/^[a-zA-Z0-9]{4,}$/.test(t)?Promise.resolve():Promise.reject(new Error("用户名只能是数字字母下划线组合"))}}]},o.a.createElement(Y.a,{placeholder:"请输入用户名"})),!e&&o.a.createElement(Q.a.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"},{min:6}]},o.a.createElement(Y.a,{placeholder:"请输入密码"})),!e&&o.a.createElement(Q.a.Item,{label:"确认密码",name:"repassword",rules:[{required:!0,validator:function(e,t){var n=a.getFieldValue("password");return n&&n!==t?Promise.reject(new Error("两次密码输入不一致")):Promise.resolve()}}]},o.a.createElement(Y.a,{placeholder:"请输入确认密码"})),o.a.createElement(Q.a.Item,{label:"状态",name:"status",rules:[{required:!0,message:"请选择状态"}]},o.a.createElement(ne,{data:[{key:"0",name:"冻结"},{key:"1",name:"正常"}],placeholder:"请选择状态"})),o.a.createElement(Q.a.Item,{label:"权限",name:"permissions"},o.a.createElement(Ee.a,{checkable:!0,onCheck:function(e){O(e),r({permissions:e})},checkedKeys:y,treeData:h})),o.a.createElement(Q.a.Item,{wrapperCol:ue},o.a.createElement(J.a,{type:"primary",htmlType:"submit"},"提交"))))},we=(n(528),n(267)),Ie=(n(530),n(275)),Ce=[{path:"/",name:"首页",exact:!0,key:"home",component:z},{path:"/adminuser",name:"用户管理",key:"adminuser",routes:[{path:"/adminuser/list",name:"用户列表",exact:!0,key:"adminuser:list:view",component:he},{path:"/adminuser/list/add",name:"新增用户",exact:!0,key:"adminuser:list:add",component:Ae},{path:"/adminuser/list/edit",name:"编辑用户",exact:!0,key:"adminuser:list:edit",component:Ae}]},{path:"/adminpermission",name:"权限管理",key:"adminpermission",routes:[{path:"/adminpermission/list",name:"权限列表",exact:!0,key:"adminpermission:list:view",component:function(){var e=Object(c.useState)(!1),t=Object(N.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(N.a)(r,2),l=i[0],s=i[1],u=Object(c.useState)("新增权限"),m=Object(N.a)(u,2),d=m[0],p=m[1],f=Object(c.useState)(0),h=Object(N.a)(f,2),b=h[0],E=h[1],v=Object(c.useState)([]),y=Object(N.a)(v,2),O=y[0],j=y[1],S=Object(c.useState)([]),k=Object(N.a)(S,2),A=k[0],w=k[1],I=Q.a.useForm(),C=Object(N.a)(I,1)[0],x=C.setFieldsValue,T=C.getFieldsValue,R=C.resetFields,F=Object(c.useRef)(),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oe(e).then((function(e){var t=e.data?e.data:[],n=De(t);j(n)}))},D=function(){var e=[{value:0,title:"根所属"}].concat(Ke(O,"id","name"));w(e)};Object(c.useEffect)((function(){P()}),[]);var K=function(){R(),E(0),s(!0),p("新增权限"),x({parentId:0,code:""}),D()},M=function(){return o.a.createElement(J.a,{className:"fr",onClick:K,type:"primary"},"新增权限")},U=[{title:"名称",dataIndex:"name"},{title:"权限标识",dataIndex:"code"},{title:"操作",dataIndex:"operations",align:"center",render:function(e,t){return o.a.createElement(o.a.Fragment,null,Ne("adminpermission:list:del")&&o.a.createElement(J.a,{className:"btn mr-5",onClick:function(){return function(e){var t=[e.id];ke(t).then((function(e){G.a.success(e.message),P()}))}(t)},size:"small",type:"primary",danger:!0},"删除"),Ne("adminpermission:list:edit")&&o.a.createElement(J.a,{className:"btn",onClick:function(){return function(e){E(e.id),x(Object(g.a)({},e)),s(!0),p("编辑权限"),D()}(t)},size:"small",type:"primary"},"编辑"))}}],z=[{key:"name",slot:o.a.createElement(Y.a,{placeholder:"名称",allowClear:!0}),initialValue:""}];return o.a.createElement(o.a.Fragment,null,Ne("adminpermission:list:add")&&o.a.createElement(M,null),l&&o.a.createElement(L.a,{title:d,visible:l,onCancel:function(){s(!1)},footer:null},o.a.createElement(be.a,{spinning:n},o.a.createElement(Q.a,Object.assign({},me,{form:C,onFinish:function(){a(!0),b?Se(b,T()).then((function(e){a(!1),G.a.success(e.message),s(!1),P()})).catch((function(){a(!1)})):je(T()).then((function(e){a(!1),G.a.success(e.message),s(!1),P()})).catch((function(){a(!1)}))}}),o.a.createElement(Q.a.Item,{label:"所属",name:"parentId"},o.a.createElement(Ie.a,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:A,placeholder:"请选择"})),o.a.createElement(Q.a.Item,{label:"辅助信息",name:"isHelp",valuePropName:"checked"},o.a.createElement(we.a,null)),o.a.createElement(Q.a.Item,{label:"名称",name:"name",rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject(new Error("请输入名称"))}}]},o.a.createElement(Y.a,{placeholder:"请输入名称"})),o.a.createElement(Q.a.Item,{label:"权限标识",name:"code",rules:[{validator:function(e,t){var n=C.getFieldValue("parentId");return C.getFieldValue("isHelp")?Promise.resolve():n||t?n||/^[a-zA-Z0-9:]+$/.test(t)?Promise.resolve():Promise.reject(new Error("权限标识格式不正确")):Promise.reject(new Error("请输入权限标识"))}}]},o.a.createElement(Y.a,{placeholder:"格式(字母数字:组合)：abc:cde"})),o.a.createElement(Q.a.Item,{wrapperCol:{xs:{span:20,offset:4},sm:{span:20,offset:4}}},o.a.createElement(J.a,{type:"primary",htmlType:"submit"},"提交"))))),o.a.createElement(q,{ref:F,handleSearch:function(e){P(e)},config:z}),o.a.createElement(Z.a,{rowKey:function(e){return e.id},columns:U,dataSource:O,pagination:!1}))}}]},{path:"/403",name:"暂无权限",exact:!0,key:"/403",component:H}],xe=function e(t){return t.reduce((function(t,n){return Array.isArray(n.routes)&&t.push(n),t.concat(Array.isArray(n.routes)?e(n.routes):n)}),[])},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/403",t=e.split("?")[0],n=xe(Ce).filter((function(e){return e.path.includes(t)}));if(!n[0])return{title:"暂无权限",tabKey:"403",component:H};var a=n[0],r=a.name,c=a.key,o=a.component;return{title:r,tabKey:c,component:o}},Re=function(e){var t=new Promise((function(t){t(e)}));return function(e){t.then((function(){return setTimeout((function(){return e()}))}))}},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2?arguments[2]:void 0,a=A.getState().storeData.curTab,r=window.location.href,c=r.split("#")[1],o=JSON.parse(JSON.stringify(a)),i=o.findIndex((function(e){return e===c}));o.splice(i,1),o.includes(t)||o.push(t);var l=A.dispatch({type:"SET_CURTAB",payload:o}),s=A.dispatch({type:"SET_RELOADPATH",payload:t}),u=setTimeout((function(){A.dispatch({type:"SET_RELOADPATH",payload:"null"})}),500),m=function(){return l&&s&&u},d=function(){return n&&"function"==typeof n?n:e.push({pathname:t})};Re(m)(d)},Pe=function(){var e=window.location.href.split("?");return e[1]?decodeURI(e[1]).split("&").reduce((function(e,t){var n=t.split("=");return Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},n[0],n[1]))}),{}):{}},Ne=function(e){return(localStorage.getItem("permissions")||[]).includes(e)},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parentId",n={};e.forEach((function(e){n[e.id]=e}));var a=[];return e.forEach((function(e){var r=n[e[t]];r?(r.children||(r.children=[]),r.children.push(e)):a.push(e)})),a},Ke=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",r=[];return t.forEach((function(t){var c={value:t[n],title:t[a],children:t.children||void 0};c.children&&(c.children=e(c.children,n,a)),r.push(c)})),r},Me=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",r=[];return t.forEach((function(t){var c={key:t[n],title:t[a],children:t.children||void 0};c.children&&(c.children=e(c.children,n,a)),r.push(c)})),r},Ue=function(e,t){var n=[];if(0===e.length)return[];return function e(t,a){for(var r=0;r<t.length;r++){var c=t[r];if(c.id===a)return n;if(n.push(c.id),c.children){var o=e(c.children,a);if(o&&o.length>0)return o}n.pop()}}(e,t),n},Le=function(e,t){for(var n=[],a=0;a<e.length;a++)t.includes(e[a])||n.push(e[a]);return n},ze=n(548),Be=n(549),He=n(550),Je=[{path:"/",name:"首页",key:"home",icon:ze.a,routes:[]},{path:"/adminuser",name:"用户管理",key:"adminuser",type:"subMenu",icon:Be.a,iconfont:"icon-xiaoshouzongjian",routes:[{path:"/adminuser/list",name:"用户列表",key:"adminuser:list:view"}]},{path:"/adminpermission",name:"权限管理",key:"adminpermission",type:"subMenu",icon:He.a,routes:[{path:"/adminpermission/list",name:"权限列表",key:"adminpermission:list:view"}]}],Ve=n(166),Ye=n.n(Ve),Ge=function(e,t){if(!y[e])throw new Error("请传入修改的数据类型和值");return{type:e,payload:t}},Qe=n(202),Ze=n.n(Qe),_e=K.a.SubMenu,We=xe(Je),qe=Object(s.b)((function(e){return e}),a)((function(e){var t=e.storeData,n=t.theme,a=t.userInfo,r=t.collapsed,i=Object(R.f)().pathname,l=Te(i).tabKey,s=void 0===l?"home":l,u=Object(c.useState)(s),m=Object(N.a)(u,2),d=m[0],p=m[1],f=a.permission,h=void 0===f?[]:f,b=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=e;if("403"===e||We.some((function(t){return t.key===e})))return n;var a=t.match(/(.*)\//g)[0].replace(/(.*)\//,"$1"),r=Te(a),c=r.tabKey;return b(c,a)}),[i]);Object(c.useEffect)((function(){var e=Te(i).tabKey,t=b(e);p(t)}),[b,i]);var E=function(e){var t=e.icon,n=e.iconfont;return o.a.createElement("span",null,n?o.a.createElement(U,{type:n,style:{fontSize:"14px"}}):!!t&&o.a.createElement(t,null),o.a.createElement("span",{className:Ze.a.noselect},e.name))};function g(e){return"subMenu"===e.type?(n=[],(t=e).routes.map((function(e){var t=h.filter((function(t){return e.key===t.code}));return t.length>0&&n.push(g(e)),t})),n.length>0?o.a.createElement(_e,{key:t.key,title:E(t)},n):null):function(e){return o.a.createElement(K.a.Item,{className:Ze.a.noselect,key:e.key,title:e.name},o.a.createElement(T.b,{to:e.path},E(e)))}(e);var t,n}var v=We.filter((function(e){return"subMenu"===e.type})).reduce((function(e,t){return[].concat(Object(D.a)(e),[t.key])}),[]),y=document.body.clientWidth<=1366?[]:v;return o.a.createElement(P.a.Sider,{collapsed:r,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,userSelect:"none"},width:220},o.a.createElement("div",{className:"logo"},o.a.createElement(T.b,{to:{pathname:"/"}},o.a.createElement("img",{alt:"logo",src:Ye.a}),!r&&o.a.createElement("h1",null,"React Antd Admin"))),o.a.createElement(K.a,{defaultOpenKeys:y,mode:"inline",onClick:function(e){var t=e.key;p(t)},selectedKeys:[d],theme:"default"===n?"light":"dark"},function(e){return e.map((function(e){return g(e)}))}(Je)))})),Xe=n(2),$e=n.n(Xe),et=(n(129),n(74)),tt=n(551),nt=n(552),at=(n(533),n(205)),rt=n(269),ct=xe(Ce),ot=Object(rt.a)(ct)((function(e){var t=e.breadcrumbs,n=Object(R.e)();return o.a.createElement(at.a,{style:{display:"inline-block"}},t.map((function(e,a){return o.a.createElement(at.a.Item,{key:e.key},o.a.createElement(J.a,{disabled:!e.exact&&"/"!==e.match.path||a===t.length-1,onClick:function(){n.push(e.match.path)},style:{padding:"0"},type:"link"},e.name))})))})),it=n(96),lt=n.n(it),st=Object(s.b)((function(e){return e}),a)((function(e){var t=e.storeData,n=t.collapsed,a=t.theme,r=t.userInfo,i=e.setStoreData,l=Object(R.e)(),s=r.userName,u=void 0===s?"-":s,m=u.slice(0,1),d=function(){var e=Object(ye.a)(ve.a.mark((function e(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("SET_USERINFO",{});case 2:l.replace({pathname:"/login"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){i("SET_THEME",e)},f=o.a.createElement(K.a,null,o.a.createElement(K.a.Item,{onClick:d},o.a.createElement("span",null,"退出登录"))),h=o.a.createElement(K.a,null,o.a.createElement(K.a.Item,{onClick:function(){return p("")}},o.a.createElement("span",null,"暗黑主题")),o.a.createElement(K.a.Item,{onClick:function(){return p("default")}},o.a.createElement("span",null,"亮白主题")));return Object(c.useEffect)((function(){if("default"===a){var e=document.createElement("script");e.id="themeJs",e.src="/less.min.js",document.body.appendChild(e),setTimeout((function(){var e=document.getElementById("less:color");e&&localStorage.setItem("themeStyle",e.innerText)}),500)}else{var t=document.getElementById("themeJs"),n=document.getElementById("less:color");t&&t.remove(),n&&n.remove(),localStorage.removeItem("themeStyle")}}),[a]),o.a.createElement(P.a.Header,{className:lt.a.header},o.a.createElement("div",{className:lt.a.toggleMenu,onClick:function(){i("SET_COLLAPSED",!n)}},n?o.a.createElement(tt.a,{className:lt.a.trigger}):o.a.createElement(nt.a,{className:lt.a.trigger})),o.a.createElement(ot,null),o.a.createElement(et.a,{className:"fr ".concat(lt.a.content),overlay:f},o.a.createElement("span",{className:lt.a.user},o.a.createElement("span",{className:"avart"},m),o.a.createElement("span",null,u))),o.a.createElement(et.a,{overlay:h},o.a.createElement("div",{title:"更换主题",className:"fr webTheme"})))})),ut=(n(535),n(279)),mt=(n(537),n(203)),dt=n(553),pt=n(270),ft=n.n(pt),ht=mt.a.TabPane,bt=[{title:"首页",key:"home",content:z,closable:!1,path:"/"}],Et=Object(s.b)((function(e){return e}),a)((function(e){var t=Object(c.useState)(""),n=Object(N.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(bt),l=Object(N.a)(i,2),s=l[0],u=l[1],m=Object(c.useState)(!1),d=Object(N.a)(m,2),p=d[0],f=d[1],h=Object(c.useState)({}),b=Object(N.a)(h,2),E=b[0],g=b[1],v=Object(c.useRef)(""),y=e.storeData,O=y.curTab,j=y.reloadPath,S=e.setStoreData,k=e.defaultActiveKey,A=e.panesItem,w=e.tabActiveKey,I=Object(R.e)(),C=Object(R.f)(),x=C.pathname,T=C.search,F=x+T,P=Object(c.useCallback)((function(e){var t=e.reduce((function(e,t){return[].concat(Object(D.a)(e),[t.path])}),[]);S("SET_CURTAB",t)}),[S]),M=Object(c.useCallback)((function(){var e=O.reduce((function(e,t){var n=Te(t),a=n.title,r=n.tabKey,c=n.component;return[].concat(Object(D.a)(e),[{title:a,key:r,content:c,closable:"home"!==r,path:t}])}),[]),t=Te(x).tabKey;u(e),r(t)}),[O,x]);Object(c.useEffect)((function(){M()}),[M]);var U=function e(t){var n=s.findIndex((function(e){return e.key===t}));if(s.splice(n,1),t!==a){var c=a;return u(s),r(c),void P(s)}var o=O[n-1],i=Te(o).tabKey;Ne(i)||"/"===o?I.push(o):(e(i),I.push(O[n-2])),u(s),P(s)},L=function(){var e=Object(ye.a)(ve.a.mark((function e(t){var n,a,c,o;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E.path,a=E.key,I.push(t?"/":n),c=[{title:"首页",key:"home",content:z,closable:!1,path:"/"}],o="home"===a||t?c:[].concat(c,[E]),u(o),r(t?"home":a),P(o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x+T;if(A.path&&A.path!==v.current){v.current=e;var t=s.findIndex((function(e){return e.key===A.key}));if(!A.key||t>-1&&e===s[t].path)r(w);else{if(t>-1)return s[t].path=e,u(s),void r(w);s.push(A),u(s),r(w),P(s)}}}),[s,A,x,M,T,P,w]);var B=function(){return"home"===E.key},H=o.a.createElement(K.a,null,o.a.createElement(K.a.Item,{key:"1",onClick:function(){return f(!0),setTimeout((function(){f(!1)}),1e3),S("SET_RELOADPATH",x+T),void setTimeout((function(){S("SET_RELOADPATH","null")}),500)},disabled:E.path!==F},"刷新"),o.a.createElement(K.a.Item,{key:"2",onClick:function(e){e.domEvent.stopPropagation(),U(E.key)},disabled:B()},"关闭"),o.a.createElement(K.a.Item,{key:"3",onClick:function(e){e.domEvent.stopPropagation(),L()}},"关闭其他"),o.a.createElement(K.a.Item,{key:"4",onClick:function(e){e.domEvent.stopPropagation(),L(!0)},disabled:B()},"全部关闭"));return o.a.createElement("div",null,o.a.createElement(mt.a,{activeKey:a,className:ft.a.tabs,defaultActiveKey:k,hideAdd:!0,onChange:function(e){r(e)},onEdit:function(e,t){return"remove"===t&&U(e)},onTabClick:function(e){var t=s.filter((function(t){return t.key===e}))[0].path;I.push({pathname:t})},type:"editable-card"},s.map((function(e){return o.a.createElement(ht,{closable:e.closable,key:e.key,tab:o.a.createElement(et.a,{overlay:H,placement:"bottomLeft",trigger:["contextMenu"]},o.a.createElement("span",{onContextMenu:function(t){return function(e,t){e.preventDefault(),g(t)}(t,e)}},p&&e.path===F&&"/403"!==e.path&&o.a.createElement(dt.a,{title:"刷新",spin:p}),e.title))},j!==e.path?o.a.createElement(e.content,{path:e.path}):o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement(ut.a,{message:"刷新中...",type:"info"})))}))))})),gt=n(172),vt=n.n(gt),yt=["/login"],Ot=["/","/403"],jt=Object(s.b)((function(e){return e}),a)((function(e){var t=Object(c.useState)("home"),n=Object(N.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({title:"",content:null,key:"",closable:!1,path:""}),l=Object(N.a)(i,2),s=l[0],u=l[1],m=Object(c.useRef)(""),d=Object(R.e)(),p=Object(R.f)(),f=p.pathname,h=p.search,b=e.storeData,g=b.collapsed,v=b.userInfo,y=e.setStoreData,O=v.token;return Object(c.useEffect)((function(){if(y("SET_COLLAPSED",document.body.clientWidth<=1024),O||"/login"===f){var e=Te(f),t=e.tabKey,n=e.title,a=e.component;if(f===m.current||yt.includes(f))r(t);else{if(!function(e){if(Ot.includes(e))return!0;var t=Te(e).tabKey;return Ne(t)}(f)){var c=Te("/403"),o=c.tabKey,i=c.title,l=c.component;return u({title:i,content:l,key:o,closable:!0,path:"/403"}),m.current="/403",r(o),void d.replace("/403")}var s=h?f+h:f;m.current=s,u({title:n,content:a,key:t,closable:"home"!==t,path:s}),r(t)}}else d.replace({pathname:"/login"})}),[d,f,h,y,O]),o.a.createElement(P.a,{className:vt.a.container,onContextMenu:function(e){return e.preventDefault()},style:{display:f.includes("/login")?"none":"flex"}},o.a.createElement(qe,null),o.a.createElement(P.a,{className:$e()(vt.a.content,Object(E.a)({},vt.a.collapsed,g))},o.a.createElement(st,null),o.a.createElement(P.a.Content,null,o.a.createElement(Et,{defaultActiveKey:"home",panesItem:s,tabActiveKey:a}))),o.a.createElement(F.a,{visibilityHeight:1080}))})),St=n(554),kt=n(274),At=n.n(kt),wt=(n(543),function(e){return ie.post("/admin/login",e)}),It=Object(s.b)((function(e){return e}),a)((function(e){var t=e.storeData,n=t.theme,a=t.userInfo,r=void 0===a?{}:a,i=e.setStoreData,l=Object(R.e)();Object(c.useEffect)((function(){r.token?l.push("/"):i("SET_CURTAB",["/"])}),[l,i,r]);var s=o.a.createElement(Q.a,{className:"login-form",name:"login-form",onFinish:function(e){var t=e.username;wt(e).then((function(e){!function(e,t,n){var a=e.permission,r=e.userName,c=e.token,o=a.reduce((function(e,t){return[].concat(Object(D.a)(e),[t.code])}),[]);localStorage.setItem("permissions",o),t("SET_USERINFO",{userName:r,permission:a,token:c||n})}({userName:t,token:e.data.token,permission:e.data.permissions},i),l.push("/")}))}},o.a.createElement(Q.a.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"}]},o.a.createElement(Y.a,{placeholder:"用户名",prefix:o.a.createElement(Be.a,null),size:"large"})),o.a.createElement(Q.a.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}]},o.a.createElement(Y.a.Password,{placeholder:"密码",prefix:o.a.createElement(St.a,null),size:"large"})),o.a.createElement(Q.a.Item,null,"用户名：admin 密码：123456"),o.a.createElement(Q.a.Item,null,o.a.createElement(J.a,{className:"login-form-button",htmlType:"submit",size:"large",type:"primary"},"登录"))),u="default"===n?"24,144,255":"110,65,255";return o.a.createElement("div",{className:"login-layout",id:"login-layout"},o.a.createElement(At.a,{config:{pointColor:u,lineColor:u,pointOpacity:.6},style:{zIndex:1}}),o.a.createElement("div",{className:"logo-box"},o.a.createElement("img",{alt:"",className:"logo",src:Ye.a}),o.a.createElement("span",{className:"logo-name"},"React Antd Admin")),s)})),Ct=function(){return o.a.createElement(T.a,null,o.a.createElement(R.a,{exact:!0,path:"/login",component:It}),o.a.createElement(R.a,{path:"/",key:"container",render:function(e){return o.a.createElement(jt,e)}}))};n(544);x.a.locale("zh-cn"),l.a.render(o.a.createElement(s.a,{store:A},o.a.createElement(u.PersistGate,{loading:null,persistor:w},o.a.createElement(r.a,{locale:I.a},o.a.createElement(Ct,null)))),document.getElementById("root"))},96:function(e,t,n){e.exports={header:"header--KlG_u",content:"content--15FU1",toggleMenu:"toggleMenu--1axnk"}}});